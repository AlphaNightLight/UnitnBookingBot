\hypertarget{md_info_cheatsheet_autotoc_md1}{}\doxysection{Table of Contents}\label{md_info_cheatsheet_autotoc_md1}

\begin{DoxyEnumerate}
\item \href{\#quick-start}{\texttt{ Quick start}}
\item \href{\#database-structure}{\texttt{ Database structure}}
\item \href{\#telegram-bot-commands}{\texttt{ Telegram Bot commands}}
\item \href{\#code-commands}{\texttt{ Code commands}}
\end{DoxyEnumerate}\hypertarget{md_info_cheatsheet_autotoc_md2}{}\doxysection{Quick start}\label{md_info_cheatsheet_autotoc_md2}
This file presents a summary of the command usages and the database structure. Other resources you can read include\+:


\begin{DoxyItemize}
\item The repository {\ttfamily R\+E\+A\+D\+M\+E.\+md}, concerning the installation and run of the project on a local machine.
\item The full function documentation, rooted in {\ttfamily docs/html/index.\+html}.
\item Links to the official documentations of all the A\+PI used by this project, reported in the file {\ttfamily info/api\+\_\+reference.\+txt}.
\item The project report, {\ttfamily report/}, with a full description of the system architecture.
\end{DoxyItemize}\hypertarget{md_info_cheatsheet_autotoc_md3}{}\doxysection{Database structure}\label{md_info_cheatsheet_autotoc_md3}
The following picture presents the database structure\+:




\begin{DoxyItemize}
\item {\ttfamily users}\+: Collects information about the user.
\begin{DoxyItemize}
\item {\ttfamily user\+\_\+id}\+: integer primary key, identifier of the chat between the user and the Bot.
\item {\ttfamily name}\+: 32-\/char string, full name associate to the user.
\item {\ttfamily username}\+: 32-\/char string, Telegram username (the one starting with @) associate to the user.
\end{DoxyItemize}
\item {\ttfamily fairs}\+: Identify groups of events that are related to each other.
\begin{DoxyItemize}
\item {\ttfamily fair\+\_\+id}\+: auto-\/incremental primary key.
\item {\ttfamily name}\+: 32-\/char string, the fair name in short.
\item {\ttfamily description}\+: long string, additional information regarding the fair.
\end{DoxyItemize}
\item {\ttfamily events}\+: Collects information about the event. Events are {\bfseries{not}} what will be booked by the user. Users will have to book a time slot that refers to an event instead.
\begin{DoxyItemize}
\item {\ttfamily event\+\_\+id}\+: auto-\/incremental primary key.
\item {\ttfamily fair\+\_\+id}\+: foreign key referencing {\ttfamily fairs}, the fair associated to the event.
\item {\ttfamily owner\+\_\+id}\+: foreign key referencing {\ttfamily users}, the user that published the event.
\item {\ttfamily name}\+: 32-\/char string, the event name in short.
\item {\ttfamily description}\+: long string, additional information regarding the event.
\end{DoxyItemize}
\item {\ttfamily slots}\+: Each event has multiple time slots associate to it. Each of them can be booked by a single user or \char`\"{}\+Free\char`\"{}, i.\+e. available for booking.
\begin{DoxyItemize}
\item {\ttfamily slot\+\_\+id}\+: auto-\/incremental primary key.
\item {\ttfamily event\+\_\+id}\+: foreign key referencing {\ttfamily events}, the event this slot refers to.
\item {\ttfamily user\+\_\+id}\+: foreign key referencing {\ttfamily users}, the user that booked the slot. If {\ttfamily N\+U\+LL} the slot is said to be \char`\"{}\+Free\char`\"{}.
\item {\ttfamily start\+\_\+time}\+: time string I\+S\+O-\/8601, the starting time of the slot.
\item {\ttfamily end\+\_\+time}\+: time string I\+S\+O-\/8601, the ending time of the slot.
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{md_info_cheatsheet_autotoc_md4}{}\doxysection{Telegram Bot commands}\label{md_info_cheatsheet_autotoc_md4}
This section presents all the commands usable by the Telegram Bot, divided in four categories.


\begin{DoxyItemize}
\item Default commands, present in any Telegram Bot.
\begin{DoxyItemize}
\item {\ttfamily /start}\+: special command automatically issued at the Bot\textquotesingle{}s start. It logs some generic information about the Bot and its purpose.
\item {\ttfamily /help}\+: presents a brief description of all the other commands.
\end{DoxyItemize}
\item Commands to print records. They print information about the database without modifying it.
\begin{DoxyItemize}
\item {\ttfamily /fairs}\+: logs information about a selected fair record.
\item {\ttfamily /events}\+: logs information about a selected event record.
\item {\ttfamily /whoami}\+: logs information about the user record associated to the current chat.
\end{DoxyItemize}
\item Commands to update and monitor a slot record. They are supposed to be used by the students, who want to book register themself to an event slot.
\begin{DoxyItemize}
\item {\ttfamily /book}\+: updates the {\ttfamily user\+\_\+id} field of a selected slot record to be the identifier of the current chat. It also inserts a new user record if the current chat is not in the database yet.
\item {\ttfamily /unbook}\+: updates the {\ttfamily user\+\_\+id} field of a selected slot record to be {\ttfamily N\+U\+LL}.
\item {\ttfamily /mybookings}\+: logs information about all the slots whose {\ttfamily user\+\_\+id} is the current chat.
\end{DoxyItemize}
\item Commands to manage event records and the associated slot records. They are supposed to be used by the companies, who want to publish events the students can register to.
\begin{DoxyItemize}
\item {\ttfamily /publish}\+: inserts a new event record whose {\ttfamily owner\+\_\+id} is the current chat. It also inserts a new user record if the current chat is not in the database yet.
\item {\ttfamily /changedes}\+: updates the {\ttfamily description} field of a selected event.
\item {\ttfamily /newslot}\+: inserts a new slot record referring to a selected event. Its {\ttfamily user\+\_\+id} will be {\ttfamily N\+U\+LL}.
\item {\ttfamily /deleteslot}\+: deletes a selected slot record.
\item {\ttfamily /deleteevent}\+: deletes a selected event record, as well as all the slot records whose {\ttfamily event\+\_\+id} refers to it.
\item {\ttfamily /myevents}\+: the user selects an event whose {\ttfamily owner\+\_\+id} is the current chat. Then, information about that event record and all the slot record associated to it are logged.
\end{DoxyItemize}
\end{DoxyItemize}

{\bfseries{N\+O\+TE}}\+: Bot commands do {\bfseries{not}} allow to create fair records, delete fair records or delete user records. Please use the \href{\#code-commands}{\texttt{ code commands}} if you wish to perform any of these operations.\hypertarget{md_info_cheatsheet_autotoc_md5}{}\doxysection{Code commands}\label{md_info_cheatsheet_autotoc_md5}
This section presents the functions usable by the {\ttfamily edit\+\_\+dp.\+py} script to directly modify the database via code. All of them require the {\ttfamily db} parameter, the path to the database file.


\begin{DoxyItemize}
\item Functions to inspect the values in the database
\begin{DoxyItemize}
\item {\ttfamily print\+\_\+users\+\_\+by\+\_\+id(db)}\+: prints all user records on standard output, ordered by identifier.
\item {\ttfamily print\+\_\+users\+\_\+by\+\_\+name(db)}\+: prints all user records on standard output, ordered by name.
\item {\ttfamily print\+\_\+fairs(db,description)}\+: prints all fair records on standard output, ordered by name. The second parameter hides the {\ttfamily description} field if False.
\item {\ttfamily print\+\_\+events(db,description)}\+: prints all event records on standard output. The second parameter hides the {\ttfamily description} field if False.
\item {\ttfamily print\+\_\+events\+\_\+with\+\_\+fair(db)}\+: prints all event records joined with fairs on standard output.
\item {\ttfamily print\+\_\+events\+\_\+with\+\_\+owner(db)}\+: prints all event records joined with users on standard output.
\item {\ttfamily print\+\_\+event\+\_\+slots(db,event\+\_\+id)}\+: prints all the slots of a given event on standard output.
\end{DoxyItemize}
\item Functions to insert new values in the database
\begin{DoxyItemize}
\item {\ttfamily insert\+\_\+user(db,user\+\_\+id,name,username)}\+: inserts a new user record.
\item {\ttfamily insert\+\_\+fair(db,name,description)}\+: inserts a new fair record.
\item {\ttfamily insert\+\_\+event(db,fair\+\_\+id,owner\+\_\+id,name,description)}\+: inserts a new event record.
\item {\ttfamily create\+\_\+slot(db,event\+\_\+id,start\+\_\+time,end\+\_\+time)}\+: inserts a new slot record, {\ttfamily user\+\_\+id} is set to {\ttfamily N\+U\+LL}.
\item {\ttfamily assign\+\_\+slot(db,slot\+\_\+id,user\+\_\+id)}\+: updates the {\ttfamily user\+\_\+id} field the selected slot.
\end{DoxyItemize}
\item Functions to modify the values in the database
\begin{DoxyItemize}
\item {\ttfamily update\+\_\+user(db,user\+\_\+id,name,username)}\+: updates a user record.
\item {\ttfamily update\+\_\+fair(db,fair\+\_\+id,name,description)}\+: updates a fair record.
\item {\ttfamily update\+\_\+event(db,event\+\_\+id,fair\+\_\+id,owner\+\_\+id,name,description)}\+: updates an event record
\item {\ttfamily update\+\_\+event\+\_\+description(db,event\+\_\+id,description)}\+: updates just the {\ttfamily description} field of an event record.
\item {\ttfamily update\+\_\+slot(db,slot\+\_\+idevent\+\_\+id,user\+\_\+id,start\+\_\+time,end\+\_\+time)}\+: updates a slot record.
\end{DoxyItemize}
\item Functions to delete values from the database
\begin{DoxyItemize}
\item {\ttfamily delete\+\_\+user(db,user\+\_\+id)}\+: deletes a user record.
\item {\ttfamily delete\+\_\+fair(db,fair\+\_\+id)}\+: deletes a fair record.
\item {\ttfamily delete\+\_\+event(db,event\+\_\+id,delete\+\_\+slots)}\+: deletes an event record. The second parameter allows to delete also all the slot records associated to it if True.
\item {\ttfamily delete\+\_\+slot(db,slot\+\_\+id)}\+: deletes a slot record. 
\end{DoxyItemize}
\end{DoxyItemize}