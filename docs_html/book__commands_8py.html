<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UniTN Booking Bot: handlers/book_commands.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="unitn_logo_100x100.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UniTN Booking Bot
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A Telegram Bot for booking appointments at UniTN</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97bbe734eff8d6674660850430e62f3c.html">handlers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">book_commands.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Handlers that manipulate the bookings.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a726c2ca54e78088db58ddd26ad01f4bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a726c2ca54e78088db58ddd26ad01f4bc">book_commands.select_fair</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a726c2ca54e78088db58ddd26ad01f4bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">INIT state for /fairs, /events and /book.  <a href="book__commands_8py.html#a726c2ca54e78088db58ddd26ad01f4bc">More...</a><br /></td></tr>
<tr class="separator:a726c2ca54e78088db58ddd26ad01f4bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f5df99897bf0dcdf8731fb6703d965"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a86f5df99897bf0dcdf8731fb6703d965">book_commands.show_fair_description</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a86f5df99897bf0dcdf8731fb6703d965"><td class="mdescLeft">&#160;</td><td class="mdescRight">STATE 0 for /fairs.  <a href="book__commands_8py.html#a86f5df99897bf0dcdf8731fb6703d965">More...</a><br /></td></tr>
<tr class="separator:a86f5df99897bf0dcdf8731fb6703d965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac90283b7b1597174965e082c937fbb4d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#ac90283b7b1597174965e082c937fbb4d">book_commands.select_event</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:ac90283b7b1597174965e082c937fbb4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">STATE 0 for /events and /book.  <a href="book__commands_8py.html#ac90283b7b1597174965e082c937fbb4d">More...</a><br /></td></tr>
<tr class="separator:ac90283b7b1597174965e082c937fbb4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2610898bb910a07caec0db18e6e0b5a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a2610898bb910a07caec0db18e6e0b5a9">book_commands.show_event_description</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a2610898bb910a07caec0db18e6e0b5a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">STATE 1 for /events.  <a href="book__commands_8py.html#a2610898bb910a07caec0db18e6e0b5a9">More...</a><br /></td></tr>
<tr class="separator:a2610898bb910a07caec0db18e6e0b5a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80fcbff7625c75bc6dd2239369e80659"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a80fcbff7625c75bc6dd2239369e80659">book_commands.whoami</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a80fcbff7625c75bc6dd2239369e80659"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command handler for /whoami.  <a href="book__commands_8py.html#a80fcbff7625c75bc6dd2239369e80659">More...</a><br /></td></tr>
<tr class="separator:a80fcbff7625c75bc6dd2239369e80659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20dd564a06bfeb9af69afe9a384ec03c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a20dd564a06bfeb9af69afe9a384ec03c">book_commands.select_slot_date</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a20dd564a06bfeb9af69afe9a384ec03c"><td class="mdescLeft">&#160;</td><td class="mdescRight">STATE 1 for /book.  <a href="book__commands_8py.html#a20dd564a06bfeb9af69afe9a384ec03c">More...</a><br /></td></tr>
<tr class="separator:a20dd564a06bfeb9af69afe9a384ec03c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f132a7d6cf7d7f10f6a3282e7e08dd2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a0f132a7d6cf7d7f10f6a3282e7e08dd2">book_commands.select_slot_time</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a0f132a7d6cf7d7f10f6a3282e7e08dd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">STATE 2 for /book.  <a href="book__commands_8py.html#a0f132a7d6cf7d7f10f6a3282e7e08dd2">More...</a><br /></td></tr>
<tr class="separator:a0f132a7d6cf7d7f10f6a3282e7e08dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39fbaf1f19cdf996f5249c2f4b1a4f23"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a39fbaf1f19cdf996f5249c2f4b1a4f23">book_commands.book_event</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a39fbaf1f19cdf996f5249c2f4b1a4f23"><td class="mdescLeft">&#160;</td><td class="mdescRight">STATE 3 for /book.  <a href="book__commands_8py.html#a39fbaf1f19cdf996f5249c2f4b1a4f23">More...</a><br /></td></tr>
<tr class="separator:a39fbaf1f19cdf996f5249c2f4b1a4f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe121e3ead63c8f0e343f7ae041dad23"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#abe121e3ead63c8f0e343f7ae041dad23">book_commands.select_slot_for_user</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:abe121e3ead63c8f0e343f7ae041dad23"><td class="mdescLeft">&#160;</td><td class="mdescRight">INIT state for /unbook.  <a href="book__commands_8py.html#abe121e3ead63c8f0e343f7ae041dad23">More...</a><br /></td></tr>
<tr class="separator:abe121e3ead63c8f0e343f7ae041dad23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56f6b010842cf27c0a8393ba3edfb696"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a56f6b010842cf27c0a8393ba3edfb696">book_commands.confirm_unbook_slot</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a56f6b010842cf27c0a8393ba3edfb696"><td class="mdescLeft">&#160;</td><td class="mdescRight">STATE 0 for /unbook.  <a href="book__commands_8py.html#a56f6b010842cf27c0a8393ba3edfb696">More...</a><br /></td></tr>
<tr class="separator:a56f6b010842cf27c0a8393ba3edfb696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb709437370f97838ddc485fdc6b28aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#abb709437370f97838ddc485fdc6b28aa">book_commands.unbook_slot</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:abb709437370f97838ddc485fdc6b28aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">STATE 1 for /unbook.  <a href="book__commands_8py.html#abb709437370f97838ddc485fdc6b28aa">More...</a><br /></td></tr>
<tr class="separator:abb709437370f97838ddc485fdc6b28aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e1218c0f66e55536b63b1b3aefc148d"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book__commands_8py.html#a8e1218c0f66e55536b63b1b3aefc148d">book_commands.my_bookings</a> (Update update, ContextTypes.DEFAULT_TYPE context)</td></tr>
<tr class="memdesc:a8e1218c0f66e55536b63b1b3aefc148d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command handler for /mybookings.  <a href="book__commands_8py.html#a8e1218c0f66e55536b63b1b3aefc148d">More...</a><br /></td></tr>
<tr class="separator:a8e1218c0f66e55536b63b1b3aefc148d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a51f53a4306da8196a3bd0fbf30026f7d"><td class="memItemLeft" align="right" valign="top"><a id="a51f53a4306da8196a3bd0fbf30026f7d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>book_commands.db</b> = os.getenv(&quot;DB_PATH&quot;)</td></tr>
<tr class="separator:a51f53a4306da8196a3bd0fbf30026f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handlers that manipulate the bookings. </p>
<p>This file contains the implementation of the Telegram Bot Handlers that manage the lifecycle of the bookings associated to them, as well as the handlers that retrieve information about all events and fairs. They are triggered by the following commands: <code>/fairs</code>, <code>/events</code>, <code>/whoami</code> <code>/book</code>, <code>/unbook</code>, <code>/mybookings</code>. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a39fbaf1f19cdf996f5249c2f4b1a4f23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39fbaf1f19cdf996f5249c2f4b1a4f23">&#9670;&nbsp;</a></span>book_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.book_event </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STATE 3 for /book. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>STATE 3 for the <code>/book</code> command.</p>
<p>Expected callback pattern (as RegEx): <code>^slot_id:[0-9]*$</code></p>
<p>This function books a slot for the user and logs its information, then terminates the conversation. </p>

</div>
</div>
<a id="a56f6b010842cf27c0a8393ba3edfb696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56f6b010842cf27c0a8393ba3edfb696">&#9670;&nbsp;</a></span>confirm_unbook_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.confirm_unbook_slot </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STATE 0 for /unbook. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>STATE 0 for the <code>/unbook</code> command.</p>
<p>Expected callback pattern (as RegEx): <code>^slot_id:[0-9]*$</code></p>
<p>This function asks the user to confirm they want to un-book the selected slot, through an inline keyboard, then goes to STATE 1 </p>

</div>
</div>
<a id="a8e1218c0f66e55536b63b1b3aefc148d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e1218c0f66e55536b63b1b3aefc148d">&#9670;&nbsp;</a></span>my_bookings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None book_commands.my_bookings </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command handler for /mybookings. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>Command handler for the <code>/mybookings</code> command.</p>
<p>This function logs the information of all the slots associated to the current user. </p>

</div>
</div>
<a id="ac90283b7b1597174965e082c937fbb4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac90283b7b1597174965e082c937fbb4d">&#9670;&nbsp;</a></span>select_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.select_event </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STATE 0 for /events and /book. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>STATE 0 for <code>/events</code> and <code>/book</code> commands.</p>
<p>Expected callback pattern (as RegEx): <code>^fair_id:[0-9]*$</code></p>
<p>This function lists to the user the events associated to the selected fair, as an inline keyboard, then goes to STATE 1 </p>

</div>
</div>
<a id="a726c2ca54e78088db58ddd26ad01f4bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726c2ca54e78088db58ddd26ad01f4bc">&#9670;&nbsp;</a></span>select_fair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.select_fair </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>INIT state for /fairs, /events and /book. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>Conversation initializer for <code>/fairs</code>, <code>/events</code> and <code>/book</code> commands.</p>
<p>This function lists to the user all the fairs as an inline keyboard, then goes to STATE 0 </p>

</div>
</div>
<a id="a20dd564a06bfeb9af69afe9a384ec03c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20dd564a06bfeb9af69afe9a384ec03c">&#9670;&nbsp;</a></span>select_slot_date()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.select_slot_date </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STATE 1 for /book. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>STATE 1 for the <code>/book</code> command.</p>
<p>Expected callback pattern (as RegEx): <code>^event_id:[0-9]*$</code></p>
<p>This function lists to the user the dates available for the slots associated to a given event, as an inline keyboard, then goes to STATE 2 </p>

</div>
</div>
<a id="abe121e3ead63c8f0e343f7ae041dad23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe121e3ead63c8f0e343f7ae041dad23">&#9670;&nbsp;</a></span>select_slot_for_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.select_slot_for_user </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>INIT state for /unbook. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>Conversation initializer for the <code>/unbook</code> command.</p>
<p>This function lists to the user the slots booked by them as an inline keyboard, then goes to STATE 0 </p>

</div>
</div>
<a id="a0f132a7d6cf7d7f10f6a3282e7e08dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f132a7d6cf7d7f10f6a3282e7e08dd2">&#9670;&nbsp;</a></span>select_slot_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.select_slot_time </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STATE 2 for /book. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>STATE 2 for the <code>/book</code> command.</p>
<p>Expected callback pattern (as RegEx): <code>^event_id:[0-9]*:day:[0-9|-]*$</code></p>
<p>This function lists to the user the time available for the slots associated to the given event-date pair, as an inline keyboard, then goes to STATE 3 </p>

</div>
</div>
<a id="a2610898bb910a07caec0db18e6e0b5a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2610898bb910a07caec0db18e6e0b5a9">&#9670;&nbsp;</a></span>show_event_description()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.show_event_description </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STATE 1 for /events. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>STATE 1 for the <code>/events</code> command.</p>
<p>Expected callback pattern (as RegEx): <code>^event_id:[0-9]*$</code></p>
<p>This function logs to the user the information on the selected event, then terminates the conversation. </p>

</div>
</div>
<a id="a86f5df99897bf0dcdf8731fb6703d965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f5df99897bf0dcdf8731fb6703d965">&#9670;&nbsp;</a></span>show_fair_description()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.show_fair_description </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STATE 0 for /fairs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>STATE 0 for the <code>/fairs</code> command.</p>
<p>Expected callback pattern (as RegEx): <code>^fair_id:[0-9]*$</code></p>
<p>This function logs to the user the information on the selected fair, then terminates the conversation. </p>

</div>
</div>
<a id="abb709437370f97838ddc485fdc6b28aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb709437370f97838ddc485fdc6b28aa">&#9670;&nbsp;</a></span>unbook_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int book_commands.unbook_slot </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STATE 1 for /unbook. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer, the next state</dd></dl>
<p>STATE 1 for the <code>/unbook</code> command.</p>
<p>Expected callback pattern (as RegEx): <code>^slot_id:[0-9]*$</code></p>
<p>This function un-books a slot and logs the information it had, then terminates the conversation. </p>

</div>
</div>
<a id="a80fcbff7625c75bc6dd2239369e80659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80fcbff7625c75bc6dd2239369e80659">&#9670;&nbsp;</a></span>whoami()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None book_commands.whoami </td>
          <td>(</td>
          <td class="paramtype">Update&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContextTypes.DEFAULT_TYPE&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command handler for /whoami. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update</td><td>Update, Telegram parameters </td></tr>
    <tr><td class="paramname">context</td><td>ContextTypes, library status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>Command handler for the <code>/whoami</code> command.</p>
<p>This function logs all the information associated to the current user. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
