<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UniTN Booking Bot: utils/db_write.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="unitn_logo_100x100.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UniTN Booking Bot
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A Telegram Bot for booking appointments at UniTN</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_cbdb8362360e11eafe2fa3bc74cf0ffd.html">utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">db_write.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions to modify the values in the database.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a739f9930ddd0c4d851b9b2763aab4bbd"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a739f9930ddd0c4d851b9b2763aab4bbd">db_write.insert_user</a> (str db, int user_id, str name, str username)</td></tr>
<tr class="memdesc:a739f9930ddd0c4d851b9b2763aab4bbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new user in the database.  <a href="db__write_8py.html#a739f9930ddd0c4d851b9b2763aab4bbd">More...</a><br /></td></tr>
<tr class="separator:a739f9930ddd0c4d851b9b2763aab4bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47305bec26782aa646e4ce855d100d51"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a47305bec26782aa646e4ce855d100d51">db_write.insert_fair</a> (str db, str name, str description)</td></tr>
<tr class="memdesc:a47305bec26782aa646e4ce855d100d51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new fair in the database.  <a href="db__write_8py.html#a47305bec26782aa646e4ce855d100d51">More...</a><br /></td></tr>
<tr class="separator:a47305bec26782aa646e4ce855d100d51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7ff789835ab641b9c0a79865b2184da"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#ab7ff789835ab641b9c0a79865b2184da">db_write.insert_event</a> (str db, int fair_id, int owner_id, str name, str description)</td></tr>
<tr class="memdesc:ab7ff789835ab641b9c0a79865b2184da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new event in the database.  <a href="db__write_8py.html#ab7ff789835ab641b9c0a79865b2184da">More...</a><br /></td></tr>
<tr class="separator:ab7ff789835ab641b9c0a79865b2184da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eec043f5a3a4840ef6aba624b5bb96f"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a4eec043f5a3a4840ef6aba624b5bb96f">db_write.create_slot</a> (str db, int event_id, datetime start_time, datetime end_time)</td></tr>
<tr class="memdesc:a4eec043f5a3a4840ef6aba624b5bb96f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new slot in the database, with no user associated.  <a href="db__write_8py.html#a4eec043f5a3a4840ef6aba624b5bb96f">More...</a><br /></td></tr>
<tr class="separator:a4eec043f5a3a4840ef6aba624b5bb96f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6091ec987abf387177b0e60c9b6738b6"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a6091ec987abf387177b0e60c9b6738b6">db_write.create_slot_str</a> (str db, int event_id, str start_time, str end_time)</td></tr>
<tr class="memdesc:a6091ec987abf387177b0e60c9b6738b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new slot in the database, with no user associated.  <a href="db__write_8py.html#a6091ec987abf387177b0e60c9b6738b6">More...</a><br /></td></tr>
<tr class="separator:a6091ec987abf387177b0e60c9b6738b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb847feb2661dc39b6a0a9060b637a3"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a3bb847feb2661dc39b6a0a9060b637a3">db_write.assign_slot</a> (str db, int slot_id, int|None user_id)</td></tr>
<tr class="memdesc:a3bb847feb2661dc39b6a0a9060b637a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns an existing slot in the database to a user.  <a href="db__write_8py.html#a3bb847feb2661dc39b6a0a9060b637a3">More...</a><br /></td></tr>
<tr class="separator:a3bb847feb2661dc39b6a0a9060b637a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a182f6df3e439c173275f3bc33a25027e"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a182f6df3e439c173275f3bc33a25027e">db_write.update_user</a> (str db, int user_id, str name, str username)</td></tr>
<tr class="memdesc:a182f6df3e439c173275f3bc33a25027e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates a user in the database.  <a href="db__write_8py.html#a182f6df3e439c173275f3bc33a25027e">More...</a><br /></td></tr>
<tr class="separator:a182f6df3e439c173275f3bc33a25027e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70b74242f27b56864ea01b26614409b6"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a70b74242f27b56864ea01b26614409b6">db_write.update_fair</a> (str db, int fair_id, str name, str description)</td></tr>
<tr class="memdesc:a70b74242f27b56864ea01b26614409b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates a fair in the database.  <a href="db__write_8py.html#a70b74242f27b56864ea01b26614409b6">More...</a><br /></td></tr>
<tr class="separator:a70b74242f27b56864ea01b26614409b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d336498ddc8d88c7c3c1ed506596a32"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a0d336498ddc8d88c7c3c1ed506596a32">db_write.update_event</a> (str db, int event_id, int fair_id, int owner_id, str name, str description)</td></tr>
<tr class="memdesc:a0d336498ddc8d88c7c3c1ed506596a32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates an event in the database.  <a href="db__write_8py.html#a0d336498ddc8d88c7c3c1ed506596a32">More...</a><br /></td></tr>
<tr class="separator:a0d336498ddc8d88c7c3c1ed506596a32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2358fd68eb00025bd5555205faf8cb9"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#aa2358fd68eb00025bd5555205faf8cb9">db_write.update_event_description</a> (str db, int event_id, str description)</td></tr>
<tr class="memdesc:aa2358fd68eb00025bd5555205faf8cb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the description of an event in the database.  <a href="db__write_8py.html#aa2358fd68eb00025bd5555205faf8cb9">More...</a><br /></td></tr>
<tr class="separator:aa2358fd68eb00025bd5555205faf8cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56c5cd146f329f76c1142cac7ce90514"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a56c5cd146f329f76c1142cac7ce90514">db_write.update_slot</a> (str db, int slot_id, int event_id, int|None user_id, datetime start_time, datetime end_time)</td></tr>
<tr class="memdesc:a56c5cd146f329f76c1142cac7ce90514"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates a slot in the database.  <a href="db__write_8py.html#a56c5cd146f329f76c1142cac7ce90514">More...</a><br /></td></tr>
<tr class="separator:a56c5cd146f329f76c1142cac7ce90514"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6b61bc2b91183e6307cc80e379a6e2"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a8b6b61bc2b91183e6307cc80e379a6e2">db_write.delete_user</a> (str db, int user_id)</td></tr>
<tr class="memdesc:a8b6b61bc2b91183e6307cc80e379a6e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a user in the database.  <a href="db__write_8py.html#a8b6b61bc2b91183e6307cc80e379a6e2">More...</a><br /></td></tr>
<tr class="separator:a8b6b61bc2b91183e6307cc80e379a6e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e9b0d696bec5b6d644df9acba206827"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a1e9b0d696bec5b6d644df9acba206827">db_write.delete_fair</a> (str db, int fair_id)</td></tr>
<tr class="memdesc:a1e9b0d696bec5b6d644df9acba206827"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a fair in the database.  <a href="db__write_8py.html#a1e9b0d696bec5b6d644df9acba206827">More...</a><br /></td></tr>
<tr class="separator:a1e9b0d696bec5b6d644df9acba206827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b87342a8d1336d5b16d0a8806a07b25"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a8b87342a8d1336d5b16d0a8806a07b25">db_write.delete_event</a> (str db, int event_id, bool delete_slots=True)</td></tr>
<tr class="memdesc:a8b87342a8d1336d5b16d0a8806a07b25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an event in the database.  <a href="db__write_8py.html#a8b87342a8d1336d5b16d0a8806a07b25">More...</a><br /></td></tr>
<tr class="separator:a8b87342a8d1336d5b16d0a8806a07b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f3c6b1c676725be22d19b2e4e26441"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db__write_8py.html#a06f3c6b1c676725be22d19b2e4e26441">db_write.delete_slot</a> (str db, int slot_id)</td></tr>
<tr class="memdesc:a06f3c6b1c676725be22d19b2e4e26441"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a slot in the database.  <a href="db__write_8py.html#a06f3c6b1c676725be22d19b2e4e26441">More...</a><br /></td></tr>
<tr class="separator:a06f3c6b1c676725be22d19b2e4e26441"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions to modify the values in the database. </p>
<p>This file contains the implementation of the functions with writing access to the database, i.e. that can modify the records contained in it. They are grouped into three categories:</p>
<p>1) Functions to insert records into the database</p>
<p>2) Functions to update records already existing in the database</p>
<p>3) Functions to delete records from the database </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3bb847feb2661dc39b6a0a9060b637a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bb847feb2661dc39b6a0a9060b637a3">&#9670;&nbsp;</a></span>assign_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.assign_slot </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int|None&#160;</td>
          <td class="paramname"><em>user_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assigns an existing slot in the database to a user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">slot_id</td><td>integer, ID of the slot to assign </td></tr>
    <tr><td class="paramname">user_id</td><td>integer, user to assign the slot to, if None the slot is free </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function sets the user_id field of a slot to the desired value. It can be used to assign a free slot to somebody, or to modify the user of and already assigned slot. To turn free an occupied slot, simply pass the None value as <code>user_id</code>. </p>

</div>
</div>
<a id="a4eec043f5a3a4840ef6aba624b5bb96f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eec043f5a3a4840ef6aba624b5bb96f">&#9670;&nbsp;</a></span>create_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.create_slot </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">datetime&#160;</td>
          <td class="paramname"><em>start_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">datetime&#160;</td>
          <td class="paramname"><em>end_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new slot in the database, with no user associated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">event_id</td><td>integer, ID of the event the slot refers to </td></tr>
    <tr><td class="paramname">start_time</td><td>datetime, date and time the slot will start </td></tr>
    <tr><td class="paramname">end_time</td><td>datetime, date and time the slot will end </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function creates a new free slot in the database, i.e. a slot associated with the NULL user. The slot's ID is not required, as it is automatically generated by the database. Datetime objects are converted to ISO-8601 time strings. </p>

</div>
</div>
<a id="a6091ec987abf387177b0e60c9b6738b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6091ec987abf387177b0e60c9b6738b6">&#9670;&nbsp;</a></span>create_slot_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.create_slot_str </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>start_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>end_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new slot in the database, with no user associated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">event_id</td><td>integer, ID of the event the slot refers to </td></tr>
    <tr><td class="paramname">start_time</td><td>time string ISO-8601, date and time the slot will start </td></tr>
    <tr><td class="paramname">end_time</td><td>time string ISO-8601, date and time the slot will end </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function creates a new free slot in the database, i.e. a slot associated with the NULL user. The slot's ID is not required, as it is automatically generated by the database. Please ensure the two time strings are formatted according to ISO-8601, i.e. "YYYY-MM-DD HH:MM:SS", as no format check is made. </p>

</div>
</div>
<a id="a8b87342a8d1336d5b16d0a8806a07b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b87342a8d1336d5b16d0a8806a07b25">&#9670;&nbsp;</a></span>delete_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.delete_event </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>delete_slots</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes an event in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">event_id</td><td>integer, ID of the event to delete </td></tr>
    <tr><td class="paramname">delete_slots</td><td>boolean, if true all the slots liked to this event are deleted as well </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function deletes an event already existing in the database. In case <code>delete_slots</code> is set to True, then all the slots linked to this event are deleted as well. </p>

</div>
</div>
<a id="a1e9b0d696bec5b6d644df9acba206827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e9b0d696bec5b6d644df9acba206827">&#9670;&nbsp;</a></span>delete_fair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.delete_fair </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fair_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a fair in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">fair_id</td><td>integer, ID of the fair to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function deletes a fair already existing in the database. </p>

</div>
</div>
<a id="a06f3c6b1c676725be22d19b2e4e26441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06f3c6b1c676725be22d19b2e4e26441">&#9670;&nbsp;</a></span>delete_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.delete_slot </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a slot in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">slot_id</td><td>integer, ID of the slot to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function deletes a slot already existing in the database. Nothing happens to the event this slot refers to. </p>

</div>
</div>
<a id="a8b6b61bc2b91183e6307cc80e379a6e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b6b61bc2b91183e6307cc80e379a6e2">&#9670;&nbsp;</a></span>delete_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.delete_user </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a user in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">user_id</td><td>integer, ID of the user to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function deletes a user already existing in the database. </p>

</div>
</div>
<a id="ab7ff789835ab641b9c0a79865b2184da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7ff789835ab641b9c0a79865b2184da">&#9670;&nbsp;</a></span>insert_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.insert_event </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fair_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inserts a new event in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">fair_id</td><td>integer, ID of the fair the event belongs to </td></tr>
    <tr><td class="paramname">owner_id</td><td>integer, ID of the user that published the event </td></tr>
    <tr><td class="paramname">name</td><td>string, the event's name in short </td></tr>
    <tr><td class="paramname">description</td><td>string, the event's extended description </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function inserts a new event into the database. The event's ID is not required, as it is automatically generated by the database. </p>

</div>
</div>
<a id="a47305bec26782aa646e4ce855d100d51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47305bec26782aa646e4ce855d100d51">&#9670;&nbsp;</a></span>insert_fair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.insert_fair </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inserts a new fair in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">name</td><td>string, the fair's name in short </td></tr>
    <tr><td class="paramname">description</td><td>string, the fair's extended description </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function inserts a new fair into the database. The fair's ID is not required, as it is automatically generated by the database. </p>

</div>
</div>
<a id="a739f9930ddd0c4d851b9b2763aab4bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a739f9930ddd0c4d851b9b2763aab4bbd">&#9670;&nbsp;</a></span>insert_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.insert_user </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inserts a new user in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">user_id</td><td>integer, ID of the user's chat with the Bot </td></tr>
    <tr><td class="paramname">name</td><td>string, user's full name </td></tr>
    <tr><td class="paramname">username</td><td>string, user's Telegram username (starts with @) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function inserts a new user into the database, and in case their user_id already exists it updates the other fields to the new values. </p>

</div>
</div>
<a id="a0d336498ddc8d88c7c3c1ed506596a32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d336498ddc8d88c7c3c1ed506596a32">&#9670;&nbsp;</a></span>update_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.update_event </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fair_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str
&#160;</td>
          <td class="paramname"><em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates an event in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">event_id</td><td>integer, ID of the event to modify </td></tr>
    <tr><td class="paramname">fair_id</td><td>integer, the new fair to assign the event to </td></tr>
    <tr><td class="paramname">owner_id</td><td>integer, the user ID of the event's new owner </td></tr>
    <tr><td class="paramname">name</td><td>string, the event's new name </td></tr>
    <tr><td class="paramname">description</td><td>string, the event's new description </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function modifies an event already existing in the database. </p>

</div>
</div>
<a id="aa2358fd68eb00025bd5555205faf8cb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2358fd68eb00025bd5555205faf8cb9">&#9670;&nbsp;</a></span>update_event_description()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.update_event_description </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the description of an event in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">event_id</td><td>integer, ID of the event to modify </td></tr>
    <tr><td class="paramname">description</td><td>string, the event's new description </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function is a specialization of <code>update_event</code> that modifies only the <code>description</code> field of the event, since this is the element that is most likely to change for this table. </p>

</div>
</div>
<a id="a70b74242f27b56864ea01b26614409b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70b74242f27b56864ea01b26614409b6">&#9670;&nbsp;</a></span>update_fair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.update_fair </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fair_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates a fair in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">fair_id</td><td>integer, ID of the fair to modify </td></tr>
    <tr><td class="paramname">name</td><td>string, the fair's new name </td></tr>
    <tr><td class="paramname">description</td><td>string, the fair's new description </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function modifies a fair already existing in the database. </p>

</div>
</div>
<a id="a56c5cd146f329f76c1142cac7ce90514"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56c5cd146f329f76c1142cac7ce90514">&#9670;&nbsp;</a></span>update_slot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.update_slot </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int|None&#160;</td>
          <td class="paramname"><em>user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">datetime&#160;</td>
          <td class="paramname"><em>start_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">datetime
&#160;</td>
          <td class="paramname"><em>end_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates a slot in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">slot_id</td><td>integer, ID of the slot to modify </td></tr>
    <tr><td class="paramname">event_id</td><td>integer, ID of the new event the slot refers to </td></tr>
    <tr><td class="paramname">user_id</td><td>integer, ID of the new user assigned to this slot, if None the slot becomes free </td></tr>
    <tr><td class="paramname">start_time</td><td>datetime, new date and time the slot will start </td></tr>
    <tr><td class="paramname">end_time</td><td>datetime, new date and time the slot will end </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function modifies a slot already existing in the database. If you want the slot to become free, simply pass the None value as <code>user_id</code>. In case the slot change involves only the field <code>user_id</code>, then <code>assign_slot</code> function is to be preferred. </p>

</div>
</div>
<a id="a182f6df3e439c173275f3bc33a25027e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a182f6df3e439c173275f3bc33a25027e">&#9670;&nbsp;</a></span>update_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None db_write.update_user </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates a user in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>string, the path to the database file </td></tr>
    <tr><td class="paramname">user_id</td><td>integer, ID of the user to modify </td></tr>
    <tr><td class="paramname">name</td><td>string, the user's new name </td></tr>
    <tr><td class="paramname">username</td><td>string, the user's new Telegram username (starts with @) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>This function modifies a user already existing in the database. <code>insert_user</code> can be used to modify a user as well, but <code>insert_user</code> is to be preferred when you are sure the user already exists. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
